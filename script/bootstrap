#!/bin/bash

cd "$(dirname "$0")/.." || exit 1

XDG_DATA_HOME="${XDG_DATA_HOME:-$HOME/.local/share}"
mkdir -p "$XDG_DATA_HOME"/{vim,nvim}{,/backup,/undo} "$XDG_DATA_HOME/nvim/shada"

if ! [ -d pack/bundle/opt/minpac ]; then
    git clone --depth 1 https://github.com/k-takata/minpac pack/bundle/opt/minpac
fi

if command -v nvim >/dev/null 2>&1; then
    alias vim=nvim
fi
vim -E -u vimrc -c PackClean -c PackUpdateAndQuit | cat
